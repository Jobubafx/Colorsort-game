<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Color Sort Game</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      background: #f3f3f3;
    }
    .page {
      display: none;
      padding: 20px;
    }
    .page.active {
      display: block;
    }
    .game-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 20px;
    }
    .tube {
      width: 60px;
      height: 200px;
      border: 2px solid #000;
      margin: 10px;
      border-radius: 10px;
      display: flex;
      flex-direction: column-reverse;
      justify-content: flex-start;
      background-color: white;
      padding: 5px;
    }
    .ball {
      width: 100%;
      height: 25%;
      border-radius: 50%;
      margin-bottom: 2px;
    }
    .red { background: red; }
    .blue { background: blue; }
    .green { background: green; }
    .yellow { background: yellow; }
    .menu-buttons button, .game-buttons button {
      margin: 5px;
      padding: 10px;
    }
  </style>
</head>
<body>
  <section id="menu-page" class="page active">
    <h1>Color Sort Game</h1>
    <input id="username" placeholder="Enter your name" />
    <div class="menu-buttons">
      <button onclick="startGame()">Start Game</button>
      <button onclick="goToShop()">Shop</button>
    </div>
  </section>  <section id="game-page" class="page">
    <h2>Level <span id="level-number">1</span></h2>
    <div id="game-container" class="game-container"></div>
    <div class="game-buttons">
      <button onclick="restartGame()">Restart</button>
      <button onclick="skipLevel()">Skip</button>
      <button onclick="goToMenu()">Menu</button>
    </div>
  </section>  <section id="shop-page" class="page">
    <h2>Shop</h2>
    <p>Coins: <span id="coin-count">0</span></p>
    <div>
      <button onclick="buySkip()">Buy Skip (10 coins)</button>
    </div>
    <button onclick="goToMenu()">Back</button>
  </section>  <script>
    const pages = document.querySelectorAll(".page");

    const gameState = {
      username: "",
      currentLevel: 1,
      coins: 0,
      skips: 0,
      tubes: []
    };

    function showPage(id) {
      pages.forEach(p => p.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    function goToMenu() {
      showPage("menu-page");
      document.getElementById("coin-count").textContent = gameState.coins;
    }

    function goToShop() {
      showPage("shop-page");
      document.getElementById("coin-count").textContent = gameState.coins;
    }

    function startGame() {
      const name = document.getElementById("username").value;
      if (!name) return alert("Please enter a username");
      gameState.username = name;
      loadLevel(gameState.currentLevel);
      showPage("game-page");
    }

    function restartGame() {
      loadLevel(gameState.currentLevel);
    }

    function skipLevel() {
      if (gameState.skips > 0) {
        gameState.skips--;
        gameState.currentLevel++;
        loadLevel(gameState.currentLevel);
      } else {
        alert("Not enough skips. Buy more in the shop.");
      }
    }

    function buySkip() {
      if (gameState.coins >= 10) {
        gameState.coins -= 10;
        gameState.skips++;
        alert("Skip purchased!");
      } else {
        alert("Not enough coins");
      }
      document.getElementById("coin-count").textContent = gameState.coins;
    }

    function loadLevel(level) {
      document.getElementById("level-number").textContent = level;
      // Example puzzles, real logic should load based on level
      const puzzles = [
        [
          ["red", "blue", "red", "blue"],
          ["green", "green", "yellow", "yellow"],
          [],
          []
        ],
        [
          ["red", "red", "blue", "blue"],
          ["yellow", "green", "yellow", "green"],
          [],
          []
        ]
      ];
      gameState.tubes = puzzles[(level - 1) % puzzles.length];
      renderGame();
    }

    function renderGame() {
      const container = document.getElementById("game-container");
      container.innerHTML = "";
      gameState.tubes.forEach((tube, index) => {
        const tubeDiv = document.createElement("div");
        tubeDiv.className = "tube";
        tubeDiv.dataset.index = index;
        tube.forEach(color => {
          const ball = document.createElement("div");
          ball.className = `ball ${color}`;
          tubeDiv.appendChild(ball);
        });
        container.appendChild(tubeDiv);
      });
    }

    window.onload = () => {
      if (localStorage.getItem("coins")) {
        gameState.coins = parseInt(localStorage.getItem("coins"));
      }
      if (localStorage.getItem("username")) {
        gameState.username = localStorage.getItem("username");
        document.getElementById("username").value = gameState.username;
      }
    }

    window.onbeforeunload = () => {
      localStorage.setItem("coins", gameState.coins);
      localStorage.setItem("username", gameState.username);
    }
  </script></body>
      </html>
